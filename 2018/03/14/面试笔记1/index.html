<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>iOS面试笔记 - 杂记 | 此去经年</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="iOS面试笔记 - 杂记 | 此去经年">
    <meta name="twitter:description" content="如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。">

    <meta property="og:type" content="article">
    <meta property="og:title" content="iOS面试笔记 - 杂记 | 此去经年">
    <meta property="og:description" content="如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。">

    
    <meta name="author" content="bloodspasm">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/favicon.ico">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://yoursite.com/2018/03/14/面试笔记1/"/>

                 
</head>

<body class="home-template no-js">
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 此去经年 的主页"><img src="/images/default_avatar.png" width="80" alt="此去经年 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for 此去经年">此去经年</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">小布先生的Blog</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="Visit the blog" class="blog-button">Blog</a></li>
            
              <li class="navigation__item"><a href="/tags/">读书笔记</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="https://weibo.com/p/1005051692500745" title="Weibo" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li> 


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/bloodspasm" title="GitHub" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  <li class="navigation__item">
    <a href="https://twitter.com/bloodspasm" title="Twitter" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>

  



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-purple"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-03-14T09:13:21.000Z" class="post-list__meta--date date">2018-03-14</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/iOS/">iOS</a>, <a class="tag-link" href="/tags/面试/">面试</a>
 </span>
      <span class="page-pv">
       Read <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">iOS面试笔记 - 杂记</h1>
  </header>

  <section class="post">
    <blockquote>
<p>AFN</p>
</blockquote>
<ol>
<li><p>关于超时:</p>
<pre><code>请求超时
获取超时
发送超时
</code></pre></li>
<li><p>设置代理:userseisson</p>
</li>
</ol>
<blockquote>
<p>FMDB</p>
</blockquote>
<p>FMDatabaseQueue解决线程安全的操作方法：</p>
<pre><code>FMDatabaseQueue使用下面这个函数对数据库进行操作，通过描述可知，这样等于是把数据库的操作放到一个串行队列中，从而保证不会在同一时间对数据库做改动。
</code></pre><blockquote>
<p>深浅copy        </p>
</blockquote>
<p><img src="http://p3azy2pd9.bkt.clouddn.com/2018-03-14-15210199012639.jpg" alt=""></p>
<pre><code>浅-地址(短短为浅 NS + copy)
深-内容
</code></pre><blockquote>
<p>强弱引用</p>
</blockquote>
<p>用@property声明的NSString（或NSArray，NSDictionary）经常使用copy关键字，为什么？如果改用strong关键字，可能造成什么问题？</p>
<pre><code>答：用@property声明 NSString、NSArray、NSDictionary 经常使用copy关键字，是因为他们有对应的可变类型：NSMutableString、NSMutableArray、NSMutableDictionary，他们之间可能进行赋值操作，为确保对象中的字符串值不会无意间变动，应该在设置新属性值时拷贝一份。
</code></pre><blockquote>
<p>5.@property 的本质是什么？ivar、getter、setter 是如何生成并添加到这个类中的。</p>
</blockquote>
<p>“属性”(property)有两大概念：ivar(实例变量)、存取方法(access method=getter)，即@property = ivar + getter + setter。</p>
<p>例如下面的这个类：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WBTextView</span> :<span class="title">UITextView</span>  </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">copy</span>)<span class="built_in">NSString</span> *placehold;  </span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">copy</span>)<span class="built_in">UIColor</span> *placeholdColor;  </span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>类完成属性的定以后，编译器会自动编写访问这些属性的方法(自动合成autosynthesis)，上述代码写出来的类等效与下面的代码：</p>
<pre><code class="objc"><span class="class"><span class="keyword">@interface</span> <span class="title">WBTextView</span> :<span class="title">UITextView</span>  </span>
- (<span class="built_in">NSString</span> *)placehold;  
-(<span class="keyword">void</span>)setPlacehold:(<span class="built_in">NSString</span> *)placehold;  
-(<span class="built_in">UIColor</span> *)placeholdColor;  
-(<span class="keyword">void</span>)setPlaceholdColor:(<span class="built_in">UIColor</span> *)placeholdColor;  
<span class="keyword">@end</span>
</code></pre>
<p>大家可能会想，编译器是如何实现该功能。原理如下：</p>
<p>1）OBJC<em>IVAR</em>$类名$属性名称 ：该属性的“偏移量” (offset)，这个偏移量是“硬编码” (hardcode)，表示</p>
<p>该变量距离存放对象的内存区域的起始地址有多远。</p>
<p>2）setter与getter方法对应的实现函数</p>
<p>3）ivar_list ：成员变量列表</p>
<p>4）method_list ：方法列表</p>
<p>5）prop_list ：属性列表</p>
<p>也就是说我们每次在增加一个属性,系统都会在ivar_list中添加一个成员变量的描述,在method_list中</p>
<p>增加setter与getter方法的描述,在属性列表中增加一个属性的描述,然后计算该属性在对象中的偏移量,</p>
<p>然后给出setter与getter方法对应的实现,在setter方法中从偏移量的位置开始赋值,在getter方法中从</p>
<p>偏移量开始取值,为了能够读取正确字节数,系统对象偏移量的指针类型进行了类型强转.</p>
<p>虽说系统自带的自动合成(autosynthesis)给我们带来很多方便，但有时一不小心就有可能导致错误。</p>
<blockquote>
<p>NSUserDefaults存储</p>
</blockquote>
<pre><code>NSUserDefaults支持的数据类型有：NSNumber（NSInteger、float、double），NSString，NSDate，NSArray，NSDictionary，BOOL.
</code></pre><blockquote>
<p>什么是Block</p>
</blockquote>
<pre><code>你定义完block之后，其实是创建了一个函数，在创建结构体的时候把函数的指针一起传给了block，所以之后可以拿出来调用。

定义block的时候，变量a的值就传递到了block结构体中，仅仅是值传递，所以在block中修改a是不会影响到外面的a变量的。
而加了__block前缀
并不是直接传递a的值了，而是把a的地址传过去了，所以在block内部便可以修改到外面的变量了。
</code></pre><blockquote>
<p>遇到tableView卡顿嘛？会造成卡顿的原因大致有哪些？</p>
</blockquote>
<p>可能造成tableView卡顿的原因有：</p>
<p>1.最常用的就是cell的重用， 注册重用标识符</p>
<p>如果不重用cell时，每当一个cell显示到屏幕上时，就会重新创建一个新的cell</p>
<p>如果有很多数据的时候，就会堆积很多cell。</p>
<p>如果重用cell，为cell创建一个ID，每当需要显示cell 的时候，都会先去缓冲池中寻找可循环利用的cell，如果没有再重新创建cell</p>
<p>2.避免cell的重新布局</p>
<p>cell的布局填充等操作 比较耗时，一般创建时就布局好</p>
<p>如可以将cell单独放到一个自定义类，初始化时就布局好</p>
<p>3.提前计算并缓存cell的属性及内容</p>
<p>当我们创建cell的数据源方法时，编译器并不是先创建cell 再定cell的高度</p>
<p>而是先根据内容一次确定每一个cell的高度，高度确定后，再创建要显示的cell，滚动时，每当cell进入凭虚都会计算高度，提前估算高度告诉编译器，编译器知道高度后，紧接着就会创建cell，这时再调用高度的具体计算方法，这样可以方式浪费时间去计算显示以外的cell</p>
<p>4.减少cell中控件的数量</p>
<p>尽量使cell得布局大致相同，不同风格的cell可以使用不用的重用标识符，初始化时添加控件，</p>
<p>不适用的可以先隐藏</p>
<p>5.不要使用ClearColor，无背景色，透明度也不要设置为0</p>
<p>渲染耗时比较长</p>
<p>6.使用局部更新</p>
<p>如果只是更新某组的话，使用reloadSection进行局部更</p>
<p>7.加载网络数据，下载图片，使用异步加载，并缓存</p>
<p>8.少使用addView 给cell动态添加view</p>
<p>9.按需加载cell，cell滚动很快时，只加载范围内的cell</p>
<p>10.不要实现无用的代理方法，tableView只遵守两个协议</p>
<p>11.缓存行高：estimatedHeightForRow不能和HeightForRow里面的layoutIfNeed同时存在，这两者同时存在才会出现“窜动”的bug。所以我的建议是：只要是固定行高就写预估行高来减少行高调用次数提升性能。如果是动态行高就不要写预估方法了，用一个行高的缓存字典来减少代码的调用次数即可</p>
<p>12.不要做多余的绘制工作。在实现drawRect:的时候，它的rect参数就是需要绘制的区域，这个区域之外的不需要进行绘制。例如上例中，就可以用CGRectIntersectsRect、CGRectIntersection或CGRectContainsRect判断是否需要绘制image和text，然后再调用绘制方法。</p>
<p>13.预渲染图像。当新的图像出现时，仍然会有短暂的停顿现象。解决的办法就是在bitmap context里先将其画一遍，导出成UIImage对象，然后再绘制到屏幕；</p>
<p>14.使用正确的数据结构来存储数据。</p>
<blockquote>
<p>字典大致实现原理；</p>
</blockquote>
<p>一：字典原理</p>
<p>NSDictionary（字典）是使用hash表来实现key和value之间的映射和存储的</p>
<p>方法：- (void)setObject:(id)anObject forKey:(id)aKey;</p>
<p>Objective-C中的字典NSDictionary底层其实是一个哈希表</p>
<p>二：哈希原理</p>
<p>散列表（Hash table，也叫哈希表），是根据关键码值(Key value)而直接进行访问的数据结构。也就是说，它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。这个映射函数叫做散列函数，存放记录的数组叫做散列表。</p>
<p>给定表M，存在函数f(key)，对任意给定的关键字值key，代入函数后若能得到包含该关键字的记录在表中的地址，则称表M为哈希(Hash）表，函数f(key)为哈希(Hash) 函数。</p>
<p>哈希概念:哈希表的本质是一个数组，数组中每一个元素称为一个箱子(bin)，箱子中存放的是键值对。</p>
<blockquote>
<p>1.OC你了解的锁有哪些？在你回答基础上进行二次提问；</p>
</blockquote>
<p>追问一：自旋和互斥对比？</p>
<p>追问二：使用以上锁需要注意哪些？</p>
<p>追问三：用C/OC/C++，任选其一，实现自旋或互斥？口述即可！</p>
<blockquote>
<p><a href="http://blog.csdn.net/clovejq/article/details/71107674" target="_blank" rel="noopener">内存泄漏可能会出现的几种原因，聊聊你的看法？</a></p>
</blockquote>
<p>追问一：非OC对象如何处理？</p>
<pre><code>CGImageRelease(ref);//非OC对象需要手动内存释放
</code></pre><p>追问二：地图类内存若泄漏，如何处理？</p>
<p>追问三：若常用框架出现内存泄漏如何处理？</p>
<blockquote>
<p>3.容错处理你们一般是怎么做的？</p>
</blockquote>
<p>4.项目开始容错处理没做？如何防止拦截潜在的崩溃？</p>

  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">Newer Post</span>
                <h2 class="post-list__post-title post-title"><a href="/2018/04/14/2018-04-14 Pod组件化/" title="Pod组件化">Pod组件化</a></h2>
                <p class="excerpt">
                
                #1 安装Pod
1、升级Ruby环境

sudo gem update --system

2、更换Ruby镜像

首先移除现有的Ruby镜像

gem sources --remove https://rubygems.org/

然后添加国内最新镜像源

gem sources -a http
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2018-04-14T02:40:55.000Z" class="post-list__meta--date date">2018-04-14</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/iOS/">iOS</a>, <a class="tag-link" href="/tags/pod/">pod</a>
</span><a class="btn-border-small" href="/2018/04/14/2018-04-14 Pod组件化/">继续阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">Older Post</span>
                <h2 class="post-list__post-title post-title"><a href="/2018/03/14/面试笔记2/" title="iOS面试笔记 - 内存管理">iOS面试笔记 - 内存管理</a></h2>
                <p class="excerpt">
                
                
1.什么是ARC？

ARC是automatic reference counting自动引用计数，在程序编译时自动加入retain/release。在对象被创建时retain count+1，在对象被release时count-1，当count=0时，销毁对象。程序中加入autoreleasep
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2018-03-14T09:13:21.000Z" class="post-list__meta--date date">2018-03-14</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/iOS/">iOS</a>, <a class="tag-link" href="/tags/面试/">面试</a>
</span><a class="btn-border-small" href="/2018/03/14/面试笔记2/">继续阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  

            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2019 bloodspasm - 本站点采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a href="http://hexo.io">Hexo</a> 搭建，使用 <a href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a href="https://monniya.com ">@Monniya</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?41918936ba907ae92396430db2ac1aa1";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
