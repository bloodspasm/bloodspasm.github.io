<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>新浪云 1 Nodejs | 此去经年</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="新浪云 1 Nodejs | 此去经年">
    <meta name="twitter:description" content="如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。">

    <meta property="og:type" content="article">
    <meta property="og:title" content="新浪云 1 Nodejs | 此去经年">
    <meta property="og:description" content="如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。">

    
    <meta name="author" content="bloodspasm">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/favicon.ico">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://yoursite.com/2018/01/29/新浪云-1-Nodejs/"/>

                 
</head>

<body class="home-template no-js">
    <script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 此去经年 的主页"><img src="/images/default_avatar.png" width="80" alt="此去经年 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for 此去经年">此去经年</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">小布先生的Blog</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">如今的我，谈不上幸福，也谈不上不幸。一切都会过去的。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">文字阁</a></li>
            
              <li class="navigation__item"><a href="/tags/">读书笔记</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="https://weibo.com/p/1005051692500745" title="我的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li> 


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/bloodspasm" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  <li class="navigation__item">
    <a href="https://twitter.com/bloodspasm" title="上Twitter找我" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>

  



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-purple"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-01-29T09:16:17.000Z" class="post-list__meta--date date">2018-01-29</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/新浪云/">新浪云</a>
 </span>
      <span class="page-pv">
       阅读 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">新浪云 1 Nodejs</h1>
  </header>

  <section class="post">
    <blockquote>
<p>环境安装</p>
</blockquote>
<p><strong>1. 更新apt</strong></p>
<pre><code>apt update -y
apt upgrade -y
apt install lsof curl vim -y
</code></pre><p><strong>2. 安装nvm</strong></p>
<pre><code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash
//重启
nvm ls-remote
nvm install v6.1.4
node -v
</code></pre><p><strong>3. 项目安装</strong><br>直接放到你要的目录就行了<br>或者git clon</p>
<p><strong>4. 安装pm2</strong></p>
<pre><code>npm install -g pm2 --registry=https://registry.npm.taobao.org --verbose

npm install -g nodemon  --registry=https://registry.npm.taobao.org --verbose

cd /var/www/myapp/
</code></pre><p>查看错误日志:vim /root/.pm2/logs/myapp-error-0.log</p>
<p>启动:<em>pm2 startOrReload pm2.json</em></p>
<p>查看:pm2 show 0(myapp)</p>
<p>查看log:pm2 log 0</p>
<p>清除:pm2 flush</p>
<p>pm2 restart all</p>
<p><strong>5. 项目端口</strong><br>    lsof -i :5050<br>    kill -9 xxx</p>
<p><em>[小程序相关]参考:<a href="https://segmentfault.com/a/1190000010213828?from=singlemessage&amp;isappinstalled=0" target="_blank" rel="noopener">https://segmentfault.com/a/1190000010213828?from=singlemessage&amp;isappinstalled=0</a><br>[OpenShift]参考:<a href="https://github.com/openshift/nodejs-ex.git" target="_blank" rel="noopener">https://github.com/openshift/nodejs-ex.git</a></em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ping</span><br><span class="line"></span><br><span class="line">apt-get install inetutils-ping</span><br><span class="line">ping:</span><br><span class="line">ping www.baidu.com</span><br><span class="line">ping www.google.com.hk</span><br></pre></td></tr></table></figure>
<blockquote>
<p>pm2配置</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"apps"</span>: [&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"nideshop"</span>,</span><br><span class="line">    <span class="attr">"script"</span>: <span class="string">"www/production.js"</span>,</span><br><span class="line">    <span class="attr">"cwd"</span>: <span class="string">"/var/www/nideshop"</span>,</span><br><span class="line">    <span class="attr">"exec_mode"</span>: <span class="string">"cluster"</span>,</span><br><span class="line">    <span class="attr">"instances"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"max_memory_restart"</span>: <span class="string">"256M"</span>,</span><br><span class="line">    <span class="attr">"autorestart"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"watch"</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"node_args"</span>: [],</span><br><span class="line">    <span class="attr">"args"</span>: [],</span><br><span class="line">    <span class="attr">"env"</span>: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>apps</strong>：json结构，apps是一个数组，每一个数组成员就是对应一个pm2中运行的应用<br><strong>name</strong>：应用程序的名称<br><strong>cwd</strong>：应用程序所在的目录<br><strong>script</strong>：应用程序的脚本路径<br><strong>exec_interpreter</strong>：应用程序的脚本类型，这里使用的shell，默认是nodejs<br><strong>min_uptime</strong>：最小运行时间，这里设置的是60s即如果应用程序在60s内退出，pm2会认为程序异常退出，此时触发重启max_restarts设置数量<br><strong>max_restarts</strong>：设置应用程序异常退出重启的次数，默认15次（从0开始计数）<br><strong>exec_mode</strong>：应用程序启动模式，这里设置的是cluster_mode（集群），默认是fork<br><strong>error_file</strong>：自定义应用程序的错误日志文件<br><strong>out_file</strong>：自定义应用程序日志文件<br><strong>pid_file</strong>：自定义应用程序的pid文件<br><strong>watch</strong>：是否启用监控模式，默认是false。如果设置成true，当应用程序变动时，pm2会自动重载。这里也可以设置你要监控的文件。</p>
<blockquote>
<p>git热更新</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">groupadd git </span><br><span class="line"></span><br><span class="line">useradd git -m -s /sbin/nologin -d /var/www/git -g git  </span><br><span class="line"></span><br><span class="line">git init --bare yourweb.git  </span><br><span class="line"></span><br><span class="line">cd /var/www/git/</span><br><span class="line"></span><br><span class="line">git init --bare yourweb.git</span><br><span class="line"></span><br><span class="line">chown -R git:git yourweb.git</span><br><span class="line"></span><br><span class="line">放在这个.ssh目录的authorized_keys文件，没有就自己创建，有多个每个公钥空一行就可以了</span><br><span class="line"></span><br><span class="line">/var/www/git/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<blockquote>
<p>作品</p>
</blockquote>
<ul>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 在线生成身份证正反面照片</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 加水印</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 聊天记录合成</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 图片拖动合成</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 文字转图片</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 视频倒放gif</li>
</ul>
</li>
</ul>
<p>参考:<a href="http://fabiaoqing.com" target="_blank" rel="noopener">http://fabiaoqing.com</a> </p>
<ul>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 银行取款生成器</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 武术段位生成器</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 纸条工资单生成器</li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> LOL封号提示生成器</li>
</ul>
</li>
</ul>
<p>参考:<a href="https://zb.mofans.net/" target="_blank" rel="noopener">https://zb.mofans.net/</a><br>参考:<a href="http://www.jiqie.com/d/index.html" target="_blank" rel="noopener">http://www.jiqie.com/d/index.html</a></p>
<ul>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 图片拼接 </li>
</ul>
</li>
<li><ul>
<li style="list-style: none"><input type="checkbox"> 美图?</li>
</ul>
</li>
</ul>

  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">最近的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/2018/01/30/2018-01-30_Git/" title="Git">Git</a></h2>
                <p class="excerpt">
                
                
tag 分支

查看
git tag
分支
git branch &amp;lt;new_name&amp;gt; &amp;lt;old_name&amp;gt;
git branch tag_ma_6.9.0 v_6.9.0
删除本地历史
git gc --prune=now

                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2018-01-30T02:08:05.000Z" class="post-list__meta--date date">2018-01-30</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/git/">git</a>
</span><a class="btn-border-small" href="/2018/01/30/2018-01-30_Git/">继续阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">更早的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/2018/01/29/新浪云-0-初始化/" title="新浪云 0 初始化">新浪云 0 初始化</a></h2>
                <p class="excerpt">
                
                创建 选择容器开发环境 查看 
12新浪云 1 Nodejshttps://sae.sina.com.cn/?m=replicasmng&amp;amp;app_id=bloodspasm&amp;amp;__r=FTgFF8

git配置



fileZilla配置



Sync同步配置(Syncovery 
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2018-01-29T08:59:50.000Z" class="post-list__meta--date date">2018-01-29</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="tag-link" href="/tags/code/">code</a>, <a class="tag-link" href="/tags/新浪云/">新浪云</a>
</span><a class="btn-border-small" href="/2018/01/29/新浪云-0-初始化/">继续阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  

            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2019 bloodspasm - 本站点采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a href="http://hexo.io">Hexo</a> 搭建，使用 <a href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a href="https://monniya.com ">@Monniya</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?41918936ba907ae92396430db2ac1aa1";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
